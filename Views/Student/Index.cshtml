@model IEnumerable<StudentCRUD.Models.Student>
@{
    ViewData["Title"] = "Students";
}
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" />
<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css" />

<h2 class="mb-3">Students</h2>

<div class="row mb-2">
    <div class="col-md-8 text-end">
        <a class="btn btn-success" href="@Url.Action("Create","Student")">Add Student</a>
    </div>
</div>

<table id="studentTable" class="display nowrap table table-bordered" style="width:100%">
    <thead>
        <tr>
            <th>ID</th>       <!-- Column 0 -->
            <th>Name</th>     <!-- Column 1 -->
            <th>Email</th>    <!-- Column 2 -->
            <th>Gender</th>   <!-- Column 3 -->
            <th>Action</th>   <!-- Column 4 -->
        </tr>

        <!-- Filter Row -->
        <tr id="filters">
            <th></th>
            <th>
                <input type="text" placeholder="Search name" class="column-search form-control form-control-sm" />
            </th>
            <th>
                <input type="text" placeholder="Search email" class="column-search form-control form-control-sm" />
            </th>
            <th>
                <select class="column-search form-control form-control-sm">
                    <option value="">All</option>
                    <option>Male</option>
                    <option>Female</option>
                    <option>Other</option>
                </select>
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var s in Model)
        {
        <tr>
            <td>@s.Id</td>
            <td>@s.Name</td>
            <td>@s.Email</td>
            <td>@s.Gender</td>
            <td>
                <a class="btn btn-sm btn-info" href="@Url.Action("Details","Student", new { id = s.Id })">Details</a>
                <a class="btn btn-sm btn-warning" href="@Url.Action("Edit","Student", new { id = s.Id })">Edit</a>
                <a class="btn btn-sm btn-danger" href="@Url.Action("Delete","Student", new { id = s.Id })">Delete</a>
            </td>

        </tr>
        }
    </tbody>
</table>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>

<script>
    (function ($) {
        $(document).ready(function () {

            if ($.fn.DataTable.isDataTable('#studentTable')) {
                $('#studentTable').DataTable().destroy();
            }

            var table = $('#studentTable').DataTable({
                responsive: true,
                pageLength: 10,
                lengthMenu: [5, 10, 25, 50, 100],

                // ⬆⬆⬆ Sorting Rule (Ascending)
                order: [
                    [0, 'asc'], // ID ascending
                    [1, 'asc'], // Name ascending
                    [2, 'asc']  // Email ascending
                ],

                initComplete: function () {
                    var api = this.api();

                    api.columns().every(function (colIdx) {
                        var column = this;
                        var input = $('#filters th').eq(colIdx).find('.column-search');

                        if (input.length) {
                            input.on('keyup change', function () {
                                column.search($(this).val()).draw();
                            });
                        }
                    });
                }
            });
        });
    })(jQuery);
</script>

<style>
    #filters .column-search {
        width: 100%;
        box-sizing: border-box;
    }

    table.dataTable tbody tr td {
        vertical-align: middle;
    }
</style>
